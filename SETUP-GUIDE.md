# ğŸš€ Supabase è¿æ¥é…ç½®æŒ‡å—

## å¿«é€Ÿæµ‹è¯•è¿æ¥

### æ–¹æ³• 1: ä½¿ç”¨æµ‹è¯•é¡µé¢
1. å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š
   ```bash
   npm run dev
   ```
2. è®¿é—® `http://localhost:5173/test-supabase`
3. ç‚¹å‡» "ğŸš€ å¼€å§‹æµ‹è¯•" æŒ‰é’®

### æ–¹æ³• 2: ä½¿ç”¨æµè§ˆå™¨æ§åˆ¶å°
1. æ‰“å¼€ä»»æ„é¡µé¢
2. æŒ‰ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·
3. åœ¨æ§åˆ¶å°è¾“å…¥ï¼š`testSupabase()`
4. æŸ¥çœ‹æµ‹è¯•ç»“æœ

## é…ç½®æ­¥éª¤

### 1. è·å– Supabase å‡­æ®

1. è®¿é—® [Supabase](https://supabase.com)
2. ç™»å½•æˆ–åˆ›å»ºè´¦æˆ·
3. åˆ›å»ºæ–°é¡¹ç›®æˆ–é€‰æ‹©ç°æœ‰é¡¹ç›®
4. è¿›å…¥ **Settings** â†’ **API**
5. å¤åˆ¶ä»¥ä¸‹ä¿¡æ¯ï¼š
   - **Project URL** (ä¾‹å¦‚: `https://your-project.supabase.co`)
   - **anon public** API key (é•¿çš„éšæœºå­—ç¬¦ä¸²)

### 2. åˆ›å»ºç¯å¢ƒå˜é‡æ–‡ä»¶

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
VITE_SUPABASE_URL=https://your-project.supabase.co
VITE_SUPABASE_ANON_KEY=your_anon_key_here
```

**âš ï¸ é‡è¦:**
- æ–‡ä»¶åå¿…é¡»æ˜¯ `.env` (æ³¨æ„å‰é¢çš„ç‚¹)
- å˜é‡åå¿…é¡»ä»¥ `VITE_` å¼€å¤´
- ä¸è¦å°† `.env` æ–‡ä»¶æäº¤åˆ° Git

### 3. è®¾ç½®æ•°æ®åº“è¡¨

1. è¿›å…¥ Supabase æ§åˆ¶å°
2. ç‚¹å‡»å·¦ä¾§èœå•çš„ **SQL Editor**
3. ç‚¹å‡» **New query**
4. å¤åˆ¶å¹¶æ‰§è¡Œ `supabase-schema.sql` æ–‡ä»¶ä¸­çš„æ‰€æœ‰ SQL è¯­å¥

### 4. é…ç½® CORS (å¦‚æœéœ€è¦)

1. åœ¨ Supabase æ§åˆ¶å°ä¸­
2. è¿›å…¥ **Settings** â†’ **API**
3. åœ¨ **CORS allowed origins** ä¸­æ·»åŠ ï¼š
   - `http://localhost:5173` (å¼€å‘ç¯å¢ƒ)
   - `https://your-site.netlify.app` (ç”Ÿäº§ç¯å¢ƒ)

## æµ‹è¯•éªŒè¯

### æˆåŠŸçš„è¿æ¥åº”è¯¥æ˜¾ç¤ºï¼š

```
ğŸ”„ å¼€å§‹æµ‹è¯• Supabase è¿æ¥...
1ï¸âƒ£ æµ‹è¯•åŸºç¡€è¿æ¥...
âœ… åŸºç¡€è¿æ¥æˆåŠŸ!
2ï¸âƒ£ æ£€æŸ¥æ•°æ®è¡¨ç»“æ„...
  categories: âœ… è¡¨å­˜åœ¨ä¸”å¯è®¿é—®
  articles: âœ… è¡¨å­˜åœ¨ä¸”å¯è®¿é—®
  comments: âœ… è¡¨å­˜åœ¨ä¸”å¯è®¿é—®
3ï¸âƒ£ æµ‹è¯•æ•°æ®æŸ¥è¯¢...
âœ… æ‰¾åˆ° 4 ä¸ªåˆ†ç±»
âœ… æ‰¾åˆ° 3 ç¯‡æ–‡ç« 
ğŸ‰ Supabase è¿æ¥æµ‹è¯•å®Œæˆ!
```

### å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ³•

#### é”™è¯¯ 1: `Invalid API key`
**åŸå› **: API å¯†é’¥é”™è¯¯
**è§£å†³**: æ£€æŸ¥ `.env` æ–‡ä»¶ä¸­çš„ `VITE_SUPABASE_ANON_KEY` æ˜¯å¦æ­£ç¡®

#### é”™è¯¯ 2: `relation "categories" does not exist`
**åŸå› **: æ•°æ®åº“è¡¨æœªåˆ›å»º
**è§£å†³**: æ‰§è¡Œ `supabase-schema.sql` ä¸­çš„ SQL è¯­å¥

#### é”™è¯¯ 3: `CORS policy would block cross-origin request`
**åŸå› **: CORS é…ç½®é—®é¢˜
**è§£å†³**: åœ¨ Supabase è®¾ç½®ä¸­æ·»åŠ å½“å‰åŸŸå

#### é”™è¯¯ 4: `SupabaseClient is not a constructor`
**åŸå› **: åŒ…ç‰ˆæœ¬é—®é¢˜
**è§£å†³**: é‡æ–°å®‰è£…ä¾èµ–ï¼š
```bash
npm install @supabase/supabase-js
```

## éªŒè¯åŠŸèƒ½

è¿æ¥æˆåŠŸåï¼Œä½ åº”è¯¥èƒ½å¤Ÿï¼š

1. âœ… è®¿é—®é¦–é¡µçœ‹åˆ°æ–‡ç« åˆ—è¡¨
2. âœ… ç‚¹å‡»æ–‡ç« è¿›å…¥è¯¦æƒ…é¡µ
3. âœ… åœ¨ç®¡ç†é¡µé¢åˆ›å»ºå’Œç¼–è¾‘æ–‡ç« 
4. âœ… å‘è¡¨è¯„è®ºå¹¶åœ¨åå°ç®¡ç†

## å¼€å‘ç¯å¢ƒæµ‹è¯•å‘½ä»¤

```bash
# é‡å¯å¼€å‘æœåŠ¡å™¨ä»¥åŠ è½½æ–°çš„ç¯å¢ƒå˜é‡
npm run dev

# åœ¨æµè§ˆå™¨ä¸­è®¿é—®æµ‹è¯•é¡µé¢
open http://localhost:5173/test-supabase

# æˆ–è€…ç›´æ¥åœ¨æ§åˆ¶å°æµ‹è¯•
# æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼Œè¾“å…¥ï¼š
testSupabaseConnection()
```

## ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

éƒ¨ç½²åˆ° Netlify æ—¶ï¼š

1. åœ¨ Netlify æ§åˆ¶å°çš„ **Site settings** â†’ **Environment variables** ä¸­æ·»åŠ ï¼š
   - `VITE_SUPABASE_URL`
   - `VITE_SUPABASE_ANON_KEY`

2. ç¡®ä¿ä½ çš„ Supabase é¡¹ç›® CORS è®¾ç½®åŒ…å« Netlify åŸŸå

---

ğŸ‰ **å®Œæˆé…ç½®åï¼Œä½ çš„åšå®¢ç³»ç»Ÿå°±å¯ä»¥æ­£å¸¸å·¥ä½œäº†ï¼**